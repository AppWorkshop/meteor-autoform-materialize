<template name="afArrayField_materialize">
  <div class="collection">
    <div class="collection-item">
      {{afFieldLabelText name=atts.name}}

      {{#if afArrayFieldHasLessThanMaximum name=atts.name minCount=this.atts.minCount maxCount=this.atts.maxCount}}
        <a href="#!" class="secondary-content autoform-add-item" data-autoform-field="{{atts.name}}" data-autoform-minCount="{{atts.minCount}}" data-autoform-maxCount="{{atts.maxCount}}">
          {{> tooltippedIcon icon="add" iconClass="" text="Add" position="left"}}
        </a>
      {{/if}}
    </div>
    {{#if afFieldIsInvalid name=atts.name}}
      <div class="collection-item">
        <span class="red-text">{{{afFieldMessage name=atts.name}}}</span>
      </div>
    {{/if}}

    {{#afEachArrayItem name=atts.name minCount=this.atts.minCount maxCount=this.atts.maxCount}}
      {{#if afArrayFieldHasMoreThanMinimum name=../atts.name minCount=../atts.minCount maxCount=../atts.maxCount}}
        <div class="collection-item">

          <!-- <div> -->
          <div style="width: calc(100% - 3rem);">
            {{> afQuickField name=this.name label=false options=afOptionsFromSchema}}
          </div>

          <!-- <div> -->
          <div class="right autoform-remove-item" style="width: 3rem; margin-top: -4rem">
            <a href="#" class="secondary-content">
              {{> tooltippedIcon icon="delete" iconClass="" text="Remove" position="left"}}
            </a>
          </div>
        </div>
        {{else}}
          {{> afQuickField name=this.name label=false options=afOptionsFromSchema}}
        {{/if}}

    {{/afEachArrayItem}}
  </div>
</template>
